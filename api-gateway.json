{"openapi":"3.0.0","info":{"title":"API Gateway docs","description":"API Gateway for microservices of Blogger microservices. \n\nIn order to try out the endpoints in Swagger UI, you can use Api gateway server or choose corresponding server from the dropdown\n\nThe gateway is calling to api registry upon the start to retrieve the data of all the registered apis which it uses for creating the proxy -> it compares the apiname which is the path obtained from the docs of each registered api  and if it finds match it makes the call to the corresponding server using the same path.\n\nThe data is being cached for 24 hours using redis cache. In case of change, the application is listening on rabbitmq exchange queue specific for communication of api registry and gateway and if it recieves the message about update, it reloads the data directly","contact":{"name":"Marek Slavicek"},"version":"1.0.0"},"servers":[{"url":"http://localhost:3333","description":"API Gateway server"},{"url":"http://localhost:3000/","description":"User Management Service"},{"url":"http://localhost:5555/","description":"Blog Management Service"}],"components":{"securitySchemes":{"bearerAuth":{"type":"http","scheme":"bearer","name":"authorization","in":"headers"}},"schemas":{"CreateUserInput":{"type":"object","required":["username","password","passwordConfirmation","email"],"properties":{"email":{"type":"string","default":"john.doe@example.com"},"username":{"type":"string","default":"JohnDoe99"},"password":{"type":"string","default":"Password123!"},"passwordConfirmation":{"type":"string","default":"Password123!"}}},"CreateUserResponse":{"type":"object","properties":{"id":{"type":"number"},"username":{"type":"string"}}},"LoginUserInput":{"type":"object","required":["username","password"],"properties":{"username":{"type":"string","default":"JohnDoe99"},"password":{"type":"string","default":"Password123!"}}},"LoginUserResponse":{"type":"object","properties":{"token":{"type":"string"},"username":{"type":"string"},"avatar":{"type":"string"}}},"ForgottenPasswordUserSchema":{"type":"object","required":["email"],"properties":{"email":{"type":"string","default":"john.doe@example.com"}}},"ApiMessage":{"type":"object","properties":{"message":{"type":"string"}}},"ResetPasswordUserSchema":{"type":"object","required":["email","password","passwordConfirmation"],"properties":{"email":{"type":"string","default":"john.doe@example.com"},"password":{"type":"string","default":"Password123!"},"passwordConfirmation":{"type":"string","default":"Password123!"}}},"ActivateUserAccountSchema":{"type":"object","required":["avatar"],"properties":{"avatar":{"type":"string","default":"assets/avatar.jpg"}}},"ActivationResponse":{"type":"object","properties":{"username":{"type":"string"},"active":{"type":"boolean"},"avatar":{"type":"string"},"token":{"type":"string"}}},"ApiError":{"type":"object","properties":{"error":{"type":"string"}}},"ValidationError":{"type":"object","properties":{"code":{"type":"string"},"expected":{"type":"string"},"received":{"type":"string"},"path":{"type":"array","items":{"type":"string"}},"message":{"type":"string"}}},"CreateArticleInput":{"type":"object","required":["title","perex","content","image","state"],"properties":{"title":{"type":"string","default":"My title"},"perex":{"type":"string","default":"Perex must be at least 50 characters or the request won't go through"},"content":{"type":"string","default":"Main thing"},"image":{"type":"string","default":"path to image on frontend app"},"state":{"type":"string","default":"draft"}}},"CreateArticleResponse":{"type":"object","properties":{"id":{"type":"number"},"title":{"type":"string"},"state":{"type":"string"},"image":{"type":"string"},"createdAt":{"type":"date"}}}}},"paths":{"/user-service-api/users":{"post":{"tags":["UserServiceAPI"],"summary":"Register a user","requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateUserInput"}}}},"responses":{"200":{"description":"Success","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateUserResponse"}}}},"400":{"description":"Bad Request","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/ValidationError"}}}}},"409":{"description":"Conflict","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiError"}}}}}}},"/user-service-api/users/login":{"post":{"tags":["UserServiceAPI"],"summary":"Logs in a user","requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/LoginUserInput"}}}},"responses":{"200":{"description":"Success","content":{"application/json":{"schema":{"$ref":"#/components/schemas/LoginUserResponse"}}}},"400":{"description":"Bad request","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/ValidationError"}}}}},"401":{"description":"Unauthorized - some of the fields doesn't match","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiError"}}}},"403":{"description":"Forbidden - user is not active","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiError"}}}}}}},"/user-service-api/users/forgotten-password":{"post":{"tags":["UserServiceAPI"],"summary":"Sends email with token to reset password","requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ForgottenPasswordUserSchema"}}}},"responses":{"200":{"description":"Success","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiMessage"}}}},"400":{"description":"Bad Request","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/ValidationError"}}}}},"404":{"description":"Not found - user email","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiError"}}}}}}},"/user-service-api/users/recover":{"post":{"tags":["UserServiceAPI"],"summary":"Changes user's password","parameters":[{"in":"query","name":"token","required":true,"schema":{"type":"string"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResetPasswordUserSchema"}}}},"responses":{"200":{"description":"Success","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiMessage"}}}},"400":{"description":"Bad Request","content":{"application/json":{"schema":{"oneOf":[{"type":"array","items":{"$ref":"#/components/schemas/ValidationError"}},{"$ref":"#/components/schemas/ApiError"}]}}}},"403":{"description":"Forbidden - token expired or token not assigned to user","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiError"}}}},"404":{"description":"Not found - user not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiError"}}}}}}},"/user-service-api/users/activate":{"post":{"tags":["UserServiceAPI"],"summary":"Activates user account based on query token","parameters":[{"in":"query","name":"token","required":true,"schema":{"type":"string"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ActivateUserAccountSchema"}}}},"responses":{"200":{"description":"Success","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ActivationResponse"}}}},"400":{"description":"Bad Request","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/ValidationError"}}}}},"403":{"description":"Forbidden - token expired, token not assigned to user","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiError"}}}}}}},"/user-service-api/users/identify":{"get":{"tags":["UserServiceAPI"],"summary":"Used for FE application when user is accessing the reset password page, the request is sent in order to allow user to access the page","parameters":[{"in":"query","name":"token","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"Success","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiMessage"}}}},"400":{"description":"Bad Request","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/ValidationError"}}}}},"403":{"description":"Unauthorized - token not assigned to user","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiError"}}}}}}},"/blogger-service-api/articles":{"post":{"tags":["BloggerServiceAPI"],"summary":"Create Article","security":[{"bearerAuth":[]}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateArticleInput"}}}},"responses":{"200":{"description":"Success","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateArticleResponse"}}}},"400":{"description":"Bad Request","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/ValidationError"}}}}},"401":{"description":"Unauthorized","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiError"}}}},"500":{"description":"Server Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiError"}}}}}}}},"tags":[]}